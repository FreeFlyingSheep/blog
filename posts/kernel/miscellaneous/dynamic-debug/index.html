<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>动态调试 | FreeFlyingSheep 的小站</title><meta name=keywords content="Linux 内核,动态调试"><meta name=description content="根据 Linux Kernel 在线文档 Dynamic debug 整理。"><meta name=author content="FreeFlyingSheep"><link rel=canonical href=https://freeflyingsheep.github.io/posts/kernel/miscellaneous/dynamic-debug/><link crossorigin=anonymous href=/assets/css/stylesheet.min.35cd0f65a15cafa92372b8313deef5960aae04b90ad722f2bbf509eb0468137e.css integrity="sha256-Nc0PZaFcr6kjcrgxPe71lgquBLkK1yLyu/UJ6wRoE34=" rel="preload stylesheet" as=style><link rel=preload href=/avatar.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://freeflyingsheep.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://freeflyingsheep.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://freeflyingsheep.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://freeflyingsheep.github.io/apple-touch-icon.png><link rel=mask-icon href=https://freeflyingsheep.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.85.0"><meta property="og:title" content="动态调试"><meta property="og:description" content="根据 Linux Kernel 在线文档 Dynamic debug 整理。"><meta property="og:type" content="article"><meta property="og:url" content="https://freeflyingsheep.github.io/posts/kernel/miscellaneous/dynamic-debug/"><meta property="og:image" content="https://freeflyingsheep.github.io/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-10-15T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-15T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://freeflyingsheep.github.io/papermod-cover.png"><meta name=twitter:title content="动态调试"><meta name=twitter:description content="根据 Linux Kernel 在线文档 Dynamic debug 整理。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://freeflyingsheep.github.io/posts/"},{"@type":"ListItem","position":2,"name":"动态调试","item":"https://freeflyingsheep.github.io/posts/kernel/miscellaneous/dynamic-debug/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"动态调试","name":"动态调试","description":"根据 Linux Kernel 在线文档 Dynamic debug 整理。\n","keywords":["Linux 内核","动态调试"],"articleBody":"根据 Linux Kernel 在线文档 Dynamic debug 整理。\n简介 动态调试（dyndbg）的主要功能是允许我们动态地打开或关闭内核代码的各种提示信息，如启用 pr_debug() 和 dev_debug() 之类的函数。\n注意，打开动态调试功能需要配置内核 Kernel hacking - printk and dmesg options - Enable dynamic printk() support。\n控制调试行为 通过往 debugfs 文件系统上的一个控制文件写入数据，来控制 pr_debug() 和 dev_debug() 的行为。\n首先，必须挂载 debugfs 文件系统（如果没自动挂载的话）：\n1  mount -t debugfs none /sys/kernel/debug   此时，控制文件位于 /dynamic_debug/control。\n例如，启用文件 svcsock.c 第 1603 行的调试内容：\n1  echo 'file svcsock.c line 1603 +p'  /dynamic_debug/control   如果语法错误，那么写入操作将会失败：\n1 2  $ echo 'file svcsock.c wtf 1 +p'  /dynamic_debug/control -bash: echo: write error: Invalid argument   查看调试行为 直接访问 /dynamic_debug/control 文件即可。比如：\n1 2 3 4 5 6 7  $ cat /dynamic_debug/control # filename:lineno [module]function flags format net/sunrpc/svc_rdma.c:323 [svcxprt_rdma]svc_rdma_cleanup =_ \"SVCRDMA Module Removed, deregister RPC RDMA transport\\012\" net/sunrpc/svc_rdma.c:341 [svcxprt_rdma]svc_rdma_init =_ \"\\011max_inline : %d\\012\" net/sunrpc/svc_rdma.c:340 [svcxprt_rdma]svc_rdma_init =_ \"\\011sq_depth : %d\\012\" net/sunrpc/svc_rdma.c:338 [svcxprt_rdma]svc_rdma_init =_ \"\\011max_requests : %d\\012\" ...   命令语言语法 空白符 多个空白符（空格和制表符）和单个空白符是等价的。\n举个例子，下面三行命令语言是等价的：\n1 2 3  echo -n 'file svcsock.c line 1603 +p'  /dynamic_debug/control echo -n ' file svcsock.c line 1603 +p '  /dynamic_debug/control echo -n 'file svcsock.c line 1603 +p'  /dynamic_debug/control   通配符 可以使用通配符来匹配多个内容。\n举个例子，匹配所有的 usb 驱动：\n1  echo \"file drivers/usb/* +p\"  /dynamic_debug/control   关键词 1 2 3 4 5 6 7 8 9 10 11 12 13 14  command ::= match-spec* flags-spec match-spec ::= 'func' string | 'file' string | 'module' string | 'format' string | 'line' line-range line-range ::= lineno | '-'lineno | lineno'-' | lineno'-'lineno lineno ::= unsigned-int   注意，line-range 不能包含空格，比如 1-30 是合法的，而 1 - 30 是非法的。\nfunc 将字符串与函数名称比较。\n1 2  func svc_tcp_accept func *recv* # in rfcomm, bluetooth, ping, tcp   file 将字符串与相对路径名或源文件名比较。\n1 2 3 4 5  file svcsock.c file kernel/freezer.c # ie column 1 of control file file drivers/usb/* # all callsites under it file inode.c:start_* # parse :tail as a func (above) file inode.c:1-100 # parse :tail as a line-range (above)   module 将字符串与模块名进行比较。模块名是用 lsmod 查看到的模块名称，去掉 .ko 后缀，且如果名称包含连字符 -，转换成下划线 _。\n1 2 3  module sunrpc module nfsd module drm* # both drm, drm_kms_helper   format 将字符串与动态调试用到的格式化字符串比较。字符串不是完整匹配，只需要部分匹配。特殊字符可以用 C 语言的转义字符来表示，如 \\040 代表空格符。或者，也可以用单引号或双引号包裹字符串。\n1 2 3 4 5  format svcrdma: // many of the NFS/RDMA server pr_debugs format readahead // some pr_debugs in the readahead cache format nfsd:\\040SETATTR // one way to match a format with whitespace format \"nfsd: SETATTR\" // a neater way to match a format with whitespace format 'nfsd: SETATTR' // yet another way to match a format with whitespace   line 将行数与动态调试函数的行号比较。\nline 1603 // exactly line 1603 line 1600-1605 // the six lines from line 1600 to line 1605 line -1605 // the 1605 lines from line 1 to line 1605 line 1600- // all lines from line 1600 to the end of the file\nflags-spec flags-spec 由一个更改操作符（change operation）和标志（flag characters）构成。\n   更改操作符 用途     - 移除标志   + 添加标志   = 设置标志    | 标志 | 用途 | | p | 启用动态调试函数 | | f | 在输出信息中包含函数名称 | | l | 在输出信息中包含行号 | | m | 在输出信息中包含模块名 | | t | 在输出信息中包含线程号（不是中断上下文产生的线程号） | | _ | 不设置标志 |\n对于 print_hex_dump_debug() 和 print_hex_dump_bytes(), 只有 p 起作用，其他标志将被忽略。\n显示标志的时候，标志前面会带有 =（代表当前标志等于什么）。\n要一次性清楚所有标志，使用 =_ 或 -flmpt。\n引导过程中的调试信息 要在引导过程中（甚至在用户空间和 debugfs 存在）为核心代码和内置模块激活调试消息，使用 dyndbg=\"QUERY\"、module.dyndbg=\"QUERY\"。 QUERY 遵循命令语言语法，但不得超过 1023 个字符，引导程序可能会施加额外的限制。\n这些参数是在 early_initcall 中 ddebug 表处理完之后进行处理的。因此，此引导参数可以启用在 early_initcall 之后运行的所有代码中的调试消息。\n如果 foo 模块不是内置的，则 foo.dyndbg 仍将在引导时进行处理，但没有任何效果，但是在以后加载模块时将对其进行重新处理。而 dyndbg= 只在引导时被处理。\n模块初始化时的调试信息 有三种方式能在模块初始化时设置动态调试。\n配置 /etc/modprobe.d/*.conf 1 2  options foo dyndbg=+pt options foo dyndbg # defaults to +p   设置引导参数 1  foo.dyndbg=\" func bar +p; func buz +mp\"   设置 modprobe 参数 1  modprobe foo dyndbg==pmf # override previous settings   实例 命令语言 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  // enable the message at line 1603 of file svcsock.c echo -n 'file svcsock.c line 1603 +p'  /dynamic_debug/control // enable all the messages in file svcsock.c echo -n 'file svcsock.c +p'  /dynamic_debug/control // enable all the messages in the NFS server module echo -n 'module nfsd +p'  /dynamic_debug/control // enable all 12 messages in the function svc_process() echo -n 'func svc_process +p'  /dynamic_debug/control // disable all 12 messages in the function svc_process() echo -n 'func svc_process -p'  /dynamic_debug/control // enable messages for NFS calls READ, READLINK, READDIR and READDIR+. echo -n 'format \"nfsd: READ\" +p'  /dynamic_debug/control // enable messages in files of which the paths include string \"usb\" echo -n '*usb* +p'  /dynamic_debug/control // enable all messages echo -n '+p'  /dynamic_debug/control // add module, function to all enabled messages echo -n '+mf'  /dynamic_debug/control   引导参数 1 2 3 4 5 6 7 8  // boot-args example, with newlines and comments for readability Kernel command line: ... // see whats going on in dyndbg=value processing dynamic_debug.verbose=1 // enable pr_debugs in 2 builtins, #cmt is stripped dyndbg=\"module params +p #cmt ; module sys +p\" // enable pr_debugs in 2 functions in a module loaded later pc87360.dyndbg=\"func pc87360_init_device +p; func pc87360_find +p\"   ","wordCount":"773","inLanguage":"zh-cn","datePublished":"2020-10-15T00:00:00Z","dateModified":"2020-10-15T00:00:00Z","author":{"@type":"Person","name":"FreeFlyingSheep"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://freeflyingsheep.github.io/posts/kernel/miscellaneous/dynamic-debug/"},"publisher":{"@type":"Organization","name":"FreeFlyingSheep 的小站","logo":{"@type":"ImageObject","url":"https://freeflyingsheep.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://freeflyingsheep.github.io/ accesskey=h title="FreeFlyingSheep 的小站 (Alt + H)">FreeFlyingSheep 的小站</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://freeflyingsheep.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://freeflyingsheep.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://freeflyingsheep.github.io/series title=Series><span>Series</span></a></li><li><a href=https://freeflyingsheep.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://freeflyingsheep.github.io/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://freeflyingsheep.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://freeflyingsheep.github.io/posts/>Posts</a></div><h1 class=post-title>动态调试</h1><div class=post-meta>October 15, 2020&nbsp;·&nbsp;4 min&nbsp;·&nbsp;FreeFlyingSheep</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a></li><li><a href=#%e6%8e%a7%e5%88%b6%e8%b0%83%e8%af%95%e8%a1%8c%e4%b8%ba aria-label=控制调试行为>控制调试行为</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e8%b0%83%e8%af%95%e8%a1%8c%e4%b8%ba aria-label=查看调试行为>查看调试行为</a></li><li><a href=#%e5%91%bd%e4%bb%a4%e8%af%ad%e8%a8%80%e8%af%ad%e6%b3%95 aria-label=命令语言语法>命令语言语法</a><ul><li><a href=#%e7%a9%ba%e7%99%bd%e7%ac%a6 aria-label=空白符>空白符</a></li><li><a href=#%e9%80%9a%e9%85%8d%e7%ac%a6 aria-label=通配符>通配符</a></li><li><a href=#%e5%85%b3%e9%94%ae%e8%af%8d aria-label=关键词>关键词</a><ul><li><a href=#func aria-label=func><code>func</code></a></li><li><a href=#file aria-label=file><code>file</code></a></li><li><a href=#module aria-label=module><code>module</code></a></li><li><a href=#format aria-label=format><code>format</code></a></li><li><a href=#line aria-label=line><code>line</code></a></li><li><a href=#flags-spec aria-label=flags-spec><code>flags-spec</code></a></li></ul></li></ul></li><li><a href=#%e5%bc%95%e5%af%bc%e8%bf%87%e7%a8%8b%e4%b8%ad%e7%9a%84%e8%b0%83%e8%af%95%e4%bf%a1%e6%81%af aria-label=引导过程中的调试信息>引导过程中的调试信息</a></li><li><a href=#%e6%a8%a1%e5%9d%97%e5%88%9d%e5%a7%8b%e5%8c%96%e6%97%b6%e7%9a%84%e8%b0%83%e8%af%95%e4%bf%a1%e6%81%af aria-label=模块初始化时的调试信息>模块初始化时的调试信息</a><ul><li><a href=#%e9%85%8d%e7%bd%ae-etcmodprobedconf aria-label="配置 /etc/modprobe.d/*.conf">配置 <code>/etc/modprobe.d/*.conf</code></a></li><li><a href=#%e8%ae%be%e7%bd%ae%e5%bc%95%e5%af%bc%e5%8f%82%e6%95%b0 aria-label=设置引导参数>设置引导参数</a></li><li><a href=#%e8%ae%be%e7%bd%ae-modprobe-%e5%8f%82%e6%95%b0 aria-label="设置 modprobe 参数">设置 <code>modprobe</code> 参数</a></li></ul></li><li><a href=#%e5%ae%9e%e4%be%8b aria-label=实例>实例</a><ul><li><a href=#%e5%91%bd%e4%bb%a4%e8%af%ad%e8%a8%80 aria-label=命令语言>命令语言</a></li><li><a href=#%e5%bc%95%e5%af%bc%e5%8f%82%e6%95%b0 aria-label=引导参数>引导参数</a></li></ul></li></ul></div></details></div><div class=post-content><p>根据 Linux Kernel 在线文档 <a href=https://www.kernel.org/doc/html/latest/admin-guide/dynamic-debug-howto.html>Dynamic debug</a> 整理。</p><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><p>动态调试（dyndbg）的主要功能是允许我们动态地打开或关闭内核代码的各种提示信息，如启用 <code>pr_debug()</code> 和 <code>dev_debug()</code> 之类的函数。</p><p>注意，打开动态调试功能需要配置内核 <code>Kernel hacking -> printk and dmesg options -> Enable dynamic printk() support</code>。</p><h2 id=控制调试行为>控制调试行为<a hidden class=anchor aria-hidden=true href=#控制调试行为>#</a></h2><p>通过往 <code>debugfs</code> 文件系统上的一个控制文件写入数据，来控制 <code>pr_debug()</code> 和 <code>dev_debug()</code> 的行为。</p><p>首先，必须挂载 <code>debugfs</code> 文件系统（如果没自动挂载的话）：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mount -t debugfs none /sys/kernel/debug
</code></pre></td></tr></table></div></div><p>此时，控制文件位于 <code>&lt;debugfs>/dynamic_debug/control</code>。</p><p>例如，启用文件 <code>svcsock.c</code> 第 <code>1603</code> 行的调试内容：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#39;file svcsock.c line 1603 +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control
</code></pre></td></tr></table></div></div><p>如果语法错误，那么写入操作将会失败：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ echo <span style=color:#e6db74>&#39;file svcsock.c wtf 1 +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control
-bash: echo: write error: Invalid argument
</code></pre></td></tr></table></div></div><h2 id=查看调试行为>查看调试行为<a hidden class=anchor aria-hidden=true href=#查看调试行为>#</a></h2><p>直接访问 <code>&lt;debugfs>/dynamic_debug/control</code> 文件即可。比如：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cat &lt;debugfs&gt;/dynamic_debug/control
<span style=color:#75715e># filename:lineno [module]function flags format</span>
net/sunrpc/svc_rdma.c:323 <span style=color:#f92672>[</span>svcxprt_rdma<span style=color:#f92672>]</span>svc_rdma_cleanup <span style=color:#f92672>=</span>_ <span style=color:#e6db74>&#34;SVCRDMA Module Removed, deregister RPC RDMA transport\012&#34;</span>
net/sunrpc/svc_rdma.c:341 <span style=color:#f92672>[</span>svcxprt_rdma<span style=color:#f92672>]</span>svc_rdma_init <span style=color:#f92672>=</span>_ <span style=color:#e6db74>&#34;\011max_inline       : %d\012&#34;</span>
net/sunrpc/svc_rdma.c:340 <span style=color:#f92672>[</span>svcxprt_rdma<span style=color:#f92672>]</span>svc_rdma_init <span style=color:#f92672>=</span>_ <span style=color:#e6db74>&#34;\011sq_depth         : %d\012&#34;</span>
net/sunrpc/svc_rdma.c:338 <span style=color:#f92672>[</span>svcxprt_rdma<span style=color:#f92672>]</span>svc_rdma_init <span style=color:#f92672>=</span>_ <span style=color:#e6db74>&#34;\011max_requests     : %d\012&#34;</span>
...
</code></pre></td></tr></table></div></div><h2 id=命令语言语法>命令语言语法<a hidden class=anchor aria-hidden=true href=#命令语言语法>#</a></h2><h3 id=空白符>空白符<a hidden class=anchor aria-hidden=true href=#空白符>#</a></h3><p>多个空白符（空格和制表符）和单个空白符是等价的。</p><p>举个例子，下面三行命令语言是等价的：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo -n <span style=color:#e6db74>&#39;file svcsock.c line 1603 +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control
echo -n <span style=color:#e6db74>&#39;  file   svcsock.c     line  1603 +p  &#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control
echo -n <span style=color:#e6db74>&#39;file svcsock.c line 1603 +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control
</code></pre></td></tr></table></div></div><h3 id=通配符>通配符<a hidden class=anchor aria-hidden=true href=#通配符>#</a></h3><p>可以使用通配符来匹配多个内容。</p><p>举个例子，匹配所有的 usb 驱动：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#34;file drivers/usb/* +p&#34;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control
</code></pre></td></tr></table></div></div><h3 id=关键词>关键词<a hidden class=anchor aria-hidden=true href=#关键词>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>command ::= match-spec* flags-spec

match-spec ::= &#39;func&#39; string |
               &#39;file&#39; string |
               &#39;module&#39; string |
               &#39;format&#39; string |
               &#39;line&#39; line-range

line-range ::= lineno |
               &#39;-&#39;lineno |
               lineno&#39;-&#39; |
               lineno&#39;-&#39;lineno

lineno ::= unsigned-int
</code></pre></td></tr></table></div></div><p>注意，<code>line-range</code> 不能包含空格，比如 <code>1-30</code> 是合法的，而 <code>1 - 30</code> 是非法的。</p><h4 id=func><code>func</code><a hidden class=anchor aria-hidden=true href=#func>#</a></h4><p>将字符串与函数名称比较。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>func svc_tcp_accept
func *recv*             # in rfcomm, bluetooth, ping, tcp
</code></pre></td></tr></table></div></div><h4 id=file><code>file</code><a hidden class=anchor aria-hidden=true href=#file>#</a></h4><p>将字符串与相对路径名或源文件名比较。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>file svcsock.c
file kernel/freezer.c   # ie column 1 of control file
file drivers/usb/*      # all callsites under it
file inode.c:start_*    # parse :tail as a func (above)
file inode.c:1-100      # parse :tail as a line-range (above)
</code></pre></td></tr></table></div></div><h4 id=module><code>module</code><a hidden class=anchor aria-hidden=true href=#module>#</a></h4><p>将字符串与模块名进行比较。模块名是用 <code>lsmod</code> 查看到的模块名称，去掉 <code>.ko</code> 后缀，且如果名称包含连字符 <code>-</code>，转换成下划线 <code>_</code>。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>module sunrpc
module nfsd
module drm*     # both drm, drm_kms_helper
</code></pre></td></tr></table></div></div><h4 id=format><code>format</code><a hidden class=anchor aria-hidden=true href=#format>#</a></h4><p>将字符串与动态调试用到的格式化字符串比较。字符串不是完整匹配，只需要部分匹配。特殊字符可以用 C 语言的转义字符来表示，如 <code>\040</code> 代表空格符。或者，也可以用单引号或双引号包裹字符串。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>format svcrdma:         // many of the NFS/RDMA server pr_debugs
format readahead        // some pr_debugs in the readahead cache
format nfsd:\040SETATTR // one way to match a format with whitespace
format &#34;nfsd: SETATTR&#34;  // a neater way to match a format with whitespace
format &#39;nfsd: SETATTR&#39;  // yet another way to match a format with whitespace
</code></pre></td></tr></table></div></div><h4 id=line><code>line</code><a hidden class=anchor aria-hidden=true href=#line>#</a></h4><p>将行数与动态调试函数的行号比较。</p><p>line 1603 // exactly line 1603
line 1600-1605 // the six lines from line 1600 to line 1605
line -1605 // the 1605 lines from line 1 to line 1605
line 1600- // all lines from line 1600 to the end of the file</p><h4 id=flags-spec><code>flags-spec</code><a hidden class=anchor aria-hidden=true href=#flags-spec>#</a></h4><p><code>flags-spec</code> 由一个更改操作符（change operation）和标志（flag characters）构成。</p><table><thead><tr><th style=text-align:center>更改操作符</th><th style=text-align:left>用途</th></tr></thead><tbody><tr><td style=text-align:center><code>-</code></td><td style=text-align:left>移除标志</td></tr><tr><td style=text-align:center><code>+</code></td><td style=text-align:left>添加标志</td></tr><tr><td style=text-align:center><code>=</code></td><td style=text-align:left>设置标志</td></tr></tbody></table><p>| 标志 | 用途 |
| <code>p</code> | 启用动态调试函数 |
| <code>f</code> | 在输出信息中包含函数名称 |
| <code>l</code> | 在输出信息中包含行号 |
| <code>m</code> | 在输出信息中包含模块名 |
| <code>t</code> | 在输出信息中包含线程号（不是中断上下文产生的线程号） |
| <code>_</code> | 不设置标志 |</p><p>对于 <code>print_hex_dump_debug()</code> 和 <code>print_hex_dump_bytes()</code>, 只有 <code>p</code> 起作用，其他标志将被忽略。</p><p>显示标志的时候，标志前面会带有 <code>=</code>（代表当前标志等于什么）。</p><p>要一次性清楚所有标志，使用 <code>=_</code> 或 <code>-flmpt</code>。</p><h2 id=引导过程中的调试信息>引导过程中的调试信息<a hidden class=anchor aria-hidden=true href=#引导过程中的调试信息>#</a></h2><p>要在引导过程中（甚至在用户空间和 <code>debugfs</code> 存在）为核心代码和内置模块激活调试消息，使用 <code>dyndbg="QUERY"</code>、<code>module.dyndbg="QUERY"</code>。 <code>QUERY</code> 遵循命令语言语法，但不得超过 <code>1023</code> 个字符，引导程序可能会施加额外的限制。</p><p>这些参数是在 <code>early_initcall</code> 中 <code>ddebug</code> 表处理完之后进行处理的。因此，此引导参数可以启用在 <code>early_initcall</code> 之后运行的所有代码中的调试消息。</p><p>如果 <code>foo</code> 模块不是内置的，则 <code>foo.dyndbg</code> 仍将在引导时进行处理，但没有任何效果，但是在以后加载模块时将对其进行重新处理。而 <code>dyndbg=</code> 只在引导时被处理。</p><h2 id=模块初始化时的调试信息>模块初始化时的调试信息<a hidden class=anchor aria-hidden=true href=#模块初始化时的调试信息>#</a></h2><p>有三种方式能在模块初始化时设置动态调试。</p><h3 id=配置-etcmodprobedconf>配置 <code>/etc/modprobe.d/*.conf</code><a hidden class=anchor aria-hidden=true href=#配置-etcmodprobedconf>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>options foo dyndbg=+pt
options foo dyndbg # defaults to +p
</code></pre></td></tr></table></div></div><h3 id=设置引导参数>设置引导参数<a hidden class=anchor aria-hidden=true href=#设置引导参数>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>foo.dyndbg=&#34; func bar +p; func buz +mp&#34;
</code></pre></td></tr></table></div></div><h3 id=设置-modprobe-参数>设置 <code>modprobe</code> 参数<a hidden class=anchor aria-hidden=true href=#设置-modprobe-参数>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>modprobe foo dyndbg<span style=color:#f92672>==</span>pmf <span style=color:#75715e># override previous settings</span>
</code></pre></td></tr></table></div></div><h2 id=实例>实例<a hidden class=anchor aria-hidden=true href=#实例>#</a></h2><h3 id=命令语言>命令语言<a hidden class=anchor aria-hidden=true href=#命令语言>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>// enable the message at line <span style=color:#ae81ff>1603</span> of file svcsock.c
echo -n <span style=color:#e6db74>&#39;file svcsock.c line 1603 +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// enable all the messages in file svcsock.c
echo -n <span style=color:#e6db74>&#39;file svcsock.c +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// enable all the messages in the NFS server module
echo -n <span style=color:#e6db74>&#39;module nfsd +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// enable all <span style=color:#ae81ff>12</span> messages in the <span style=color:#66d9ef>function</span> svc_process<span style=color:#f92672>()</span>
echo -n <span style=color:#e6db74>&#39;func svc_process +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// disable all <span style=color:#ae81ff>12</span> messages in the <span style=color:#66d9ef>function</span> svc_process<span style=color:#f92672>()</span>
echo -n <span style=color:#e6db74>&#39;func svc_process -p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// enable messages <span style=color:#66d9ef>for</span> NFS calls READ, READLINK, READDIR and READDIR+.
echo -n <span style=color:#e6db74>&#39;format &#34;nfsd: READ&#34; +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// enable messages in files of which the paths include string <span style=color:#e6db74>&#34;usb&#34;</span>
echo -n <span style=color:#e6db74>&#39;*usb* +p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// enable all messages
echo -n <span style=color:#e6db74>&#39;+p&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control

// add module, <span style=color:#66d9ef>function</span> to all enabled messages
echo -n <span style=color:#e6db74>&#39;+mf&#39;</span> &gt; &lt;debugfs&gt;/dynamic_debug/control
</code></pre></td></tr></table></div></div><h3 id=引导参数>引导参数<a hidden class=anchor aria-hidden=true href=#引导参数>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>// boot-args example, with newlines and comments for readability
Kernel command line: ...
  // see whats going on in dyndbg=value processing
  dynamic_debug.verbose=1
  // enable pr_debugs in 2 builtins, #cmt is stripped
  dyndbg=&#34;module params +p #cmt ; module sys +p&#34;
  // enable pr_debugs in 2 functions in a module loaded later
  pc87360.dyndbg=&#34;func pc87360_init_device +p; func pc87360_find +p&#34;
</code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://freeflyingsheep.github.io/tags/linux-%E5%86%85%E6%A0%B8/>Linux 内核</a></li><li><a href=https://freeflyingsheep.github.io/tags/%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95/>动态调试</a></li></ul><nav class=paginav><a class=prev href=https://freeflyingsheep.github.io/posts/kernel/data-structure/hlist/><span class=title>«</span><br><span>内核散列表</span></a>
<a class=next href=https://freeflyingsheep.github.io/posts/kernel/introduction/common/><span class=title>»</span><br><span>Linux 内核常见函数/宏</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://freeflyingsheep.github.io/>FreeFlyingSheep 的小站</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body></html>